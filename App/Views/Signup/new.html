{% extends 'base.html' %}

{% block title %}Rejestracja{% endblock %}

{% block footer %}

<script scr="/js/app.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" />
<script>
    $(document).ready(function () {
        $('#formSignup').validate({
            rules: {
                name: 'required',
                email: {
                    required: true,
                    email: true,
                    remote: '/account/validate-email'
                },
                password: {
                    required: true,
                    minlength: 6,
                    validPassword: true
                }
            },
            messages: {
                email: {
                    remote: 'E-mail już istnieje w bazie danych.'
                }
            }
        });
        
    });

    const togglePassword = document
        .querySelector('#togglePassword');

    const password = document.querySelector('#inputPassword');

    togglePassword.addEventListener('click', () => {

        // Toggle the type attribute using
        // getAttribure() method
        const type = password
            .getAttribute('type') === 'password' ?
            'text' : 'password';

        password.setAttribute('type', type);

        // Toggle the eye and bi-eye icon
        this.classList.toggle('bi-eye');
    });
</script>

{% endblock %}

{% block body %}

<h3>Rejestracja</h3>

{% if user.errors is not empty %}
<p>Errors:</p>
<ul>
    {% for error in user.errors %}
    <li>{{ error }}</li>
    {% endfor %}
</ul>
{% endif %}

<form method="post" action="/signup/create" id="formSignup">

    <div class="form-group">
        <label for="inputName"><i class="icon-user"></i></label>
        <input id="inputName" name="username" placeholder="imię" autofocus value="{{ user.username }}" required class="form"/>
    </div>
    <div class="form-group">
        <label for="inputEmail"><i class="icon-mail-alt"></i></label>
        <input id="inputEmail" name="email" placeholder="e-mail" value="{{ user.email }}" required
            type="email" class="form" />
    </div>
    <div class="form-group">
        <label for="inputEmail
        <label for="inputPassword"><i class="icon-lock"></i></label>
        <input type="password" name="password" id="inputPassword" placeholder="hasło" value="{{ user.password }}" class="form"/>
        <i class="bi bi-eye-slash" id="togglePassword"></i>
    </div>
    <button type="submit" class="btn btn-primary">Zarejestruj się</button>

</form>

{% endblock %}